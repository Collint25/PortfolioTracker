<div class="space-y-3">
    {% for comment in comments %}
    <div class="card bg-base-100 shadow-sm">
        <div class="card-body p-3">
            <div class="flex justify-between items-start">
                <p class="text-sm whitespace-pre-wrap">{{ comment.text }}</p>
                <button
                    class="btn btn-ghost btn-xs text-error"
                    hx-delete="/comments/{{ comment.id }}"
                    hx-target="#comment-section"
                    hx-confirm="Delete this comment?"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4 stroke-current">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                </button>
            </div>
            <div class="text-xs text-base-content/50">
                {{ comment.created_at.strftime('%b %d, %Y %I:%M %p') }}
            </div>
        </div>
    </div>
    {% else %}
    <p class="text-base-content/60 text-sm">No comments yet.</p>
    {% endfor %}
</div>

<form
    hx-post="/comments/transaction/{{ transaction_id }}"
    hx-target="#comment-section"
    class="mt-4"
>
    <div class="form-control">
        <textarea
            name="text"
            placeholder="Add a note..."
            class="textarea textarea-bordered textarea-sm"
            rows="2"
            required
        ></textarea>
    </div>
    <div class="mt-2">
        <button type="submit" class="btn btn-primary btn-sm">Add Comment</button>
    </div>
</form>
