<div class="grid gap-6 lg:grid-cols-2">
    <!-- Group info card -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <div class="flex justify-between items-start">
                <div>
                    <h2 class="card-title text-2xl">{{ group.name }}</h2>
                    {% if group.strategy_type %}
                    <span class="badge badge-outline mt-2">{{ group.strategy_type | replace('_', ' ') | title }}</span>
                    {% endif %}
                </div>
                <button
                    class="btn btn-ghost btn-sm text-error"
                    hx-delete="/trade-groups/{{ group.id }}"
                    hx-confirm="Delete this trade group?"
                >
                    Delete
                </button>
            </div>

            {% if group.description %}
            <p class="text-base-content/70 mt-2">{{ group.description }}</p>
            {% endif %}

            <div class="divider"></div>

            <!-- Edit form -->
            <form
                hx-put="/trade-groups/{{ group.id }}"
                hx-target="#trade-group-detail"
                class="space-y-4"
            >
                <div class="form-control">
                    <label class="label"><span class="label-text">Name</span></label>
                    <input
                        type="text"
                        name="name"
                        value="{{ group.name }}"
                        class="input input-bordered input-sm"
                        required
                    />
                </div>
                <div class="form-control">
                    <label class="label"><span class="label-text">Strategy Type</span></label>
                    <select name="strategy_type" class="select select-bordered select-sm">
                        <option value="">None</option>
                        {% for value, label in strategy_types %}
                        <option value="{{ value }}" {{ 'selected' if group.strategy_type == value else '' }}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-control">
                    <label class="label"><span class="label-text">Description</span></label>
                    <textarea
                        name="description"
                        class="textarea textarea-bordered textarea-sm"
                        rows="2"
                    >{{ group.description or '' }}</textarea>
                </div>
                <button type="submit" class="btn btn-primary btn-sm">Update Group</button>
            </form>
        </div>
    </div>

    <!-- P/L Summary -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h3 class="card-title">Summary</h3>
            <div class="stats stats-vertical shadow">
                <div class="stat">
                    <div class="stat-title">Combined P/L</div>
                    <div class="stat-value {{ 'text-success' if pl > 0 else 'text-error' if pl < 0 else '' }}">
                        ${{ '{:,.2f}'.format(pl) }}
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-title">Transactions</div>
                    <div class="stat-value text-lg">{{ transactions|length }}</div>
                </div>
                <div class="stat">
                    <div class="stat-title">Created</div>
                    <div class="stat-desc">{{ group.created_at.strftime('%B %d, %Y') }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Transactions -->
    <div class="card bg-base-100 shadow-xl lg:col-span-2">
        <div class="card-body">
            <h3 class="card-title">Transactions in Group</h3>
            <div id="group-transactions">
                {% include "partials/trade_group_transactions.html" %}
            </div>
        </div>
    </div>
</div>
