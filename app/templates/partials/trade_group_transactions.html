{% if transactions %}
<div class="overflow-x-auto">
    <table class="table table-sm">
        <thead>
            <tr>
                <th>Date</th>
                <th>Symbol</th>
                <th>Type</th>
                <th class="text-right">Qty</th>
                <th class="text-right">Price</th>
                <th class="text-right">Amount</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for txn in transactions %}
            <tr class="hover cursor-pointer" onclick="window.location='/transactions/{{ txn.id }}'">
                <td>{{ txn.trade_date.strftime('%b %d, %Y') }}</td>
                <td class="font-mono">{{ txn.symbol or '-' }}</td>
                <td>
                    <span class="badge badge-sm {{ 'badge-success' if txn.type == 'BUY' else 'badge-error' if txn.type == 'SELL' else 'badge-info' }}">
                        {{ txn.type }}
                    </span>
                </td>
                <td class="text-right">{{ '{:,.2f}'.format(txn.quantity) if txn.quantity else '-' }}</td>
                <td class="text-right">${{ '{:,.4f}'.format(txn.price) if txn.price else '-' }}</td>
                <td class="text-right font-mono {{ 'text-success' if txn.amount > 0 else 'text-error' if txn.amount < 0 else '' }}">
                    ${{ '{:,.2f}'.format(txn.amount) }}
                </td>
                <td>
                    <button
                        class="btn btn-ghost btn-xs"
                        hx-delete="/trade-groups/{{ group.id }}/remove/{{ txn.id }}"
                        hx-target="#group-transactions"
                        hx-confirm="Remove this transaction from the group?"
                        onclick="event.stopPropagation()"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4 stroke-current">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr class="font-semibold">
                <td colspan="5" class="text-right">Total:</td>
                <td class="text-right font-mono {{ 'text-success' if pl > 0 else 'text-error' if pl < 0 else '' }}">
                    ${{ '{:,.2f}'.format(pl) }}
                </td>
                <td></td>
            </tr>
        </tfoot>
    </table>
</div>
{% else %}
<p class="text-base-content/60 py-4">No transactions in this group yet.</p>
{% endif %}
