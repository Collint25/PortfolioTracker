{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Trade Groups</h1>
    <span class="badge badge-lg">{{ groups|length }} groups</span>
</div>

<!-- Create new group form -->
<div class="card bg-base-100 shadow mb-6">
    <div class="card-body">
        <h3 class="card-title text-lg">Create New Group</h3>
        <form
            hx-post="/trade-groups/"
            hx-target="#trade-group-list"
            class="flex flex-wrap gap-4 items-end"
        >
            <div class="form-control">
                <label class="label"><span class="label-text">Name</span></label>
                <input
                    type="text"
                    name="name"
                    placeholder="e.g., AAPL Iron Condor Jan 2026"
                    class="input input-bordered input-sm w-64"
                    required
                />
            </div>
            <div class="form-control">
                <label class="label"><span class="label-text">Strategy Type</span></label>
                <select name="strategy_type" class="select select-bordered select-sm">
                    <option value="">None</option>
                    {% for value, label in strategy_types %}
                    <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-control flex-1">
                <label class="label"><span class="label-text">Description (optional)</span></label>
                <input
                    type="text"
                    name="description"
                    placeholder="Notes about this trade group"
                    class="input input-bordered input-sm"
                />
            </div>
            <button type="submit" class="btn btn-primary btn-sm">Create Group</button>
        </form>
    </div>
</div>

<!-- Auto-suggestions -->
<div class="card bg-base-100 shadow mb-6">
    <div class="card-body">
        <h3 class="card-title text-lg">Suggested Groups</h3>
        <p class="text-sm text-base-content/60 mb-4">
            Transactions with the same external reference ID that aren't grouped yet.
        </p>
        <div id="suggestions" hx-get="/trade-groups/suggestions" hx-trigger="load" hx-swap="innerHTML">
            <span class="loading loading-spinner loading-sm"></span>
            Loading suggestions...
        </div>
    </div>
</div>

<!-- Trade group list -->
<div id="trade-group-list">
    {% include "partials/trade_group_list.html" %}
</div>
{% endblock %}
